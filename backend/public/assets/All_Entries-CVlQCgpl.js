import{r as u,j as w,o as y,c as n,a as E,b as o,F as d,i as h,e as v,g as a,t as c,k as x,v as A,l as C}from"./index-jLO2RzT8.js";import{_ as j,S as U}from"./Sidenavigation-BVCFXr9M.js";const F={class:"all-entries"},L={class:"kanban_board"},S={class:"user_name"},B=["onClick"],D={class:"activity_title"},N={class:"activity_details"},T=["onClick"],V={__name:"All_Entries",setup(W){const l=u([]),i=w({}),_=u(null);async function p(){try{const s=await(await fetch("/current-user",{method:"GET",headers:{"Content-Type":"application/json"}})).json();s&&s.user&&(_.value=s.user)}catch(e){console.error("Error getting user data:",e)}finally{isLoading.value=!1}}async function f(){try{const e=await fetch("/api/users-with-activities");l.value=await e.json(),l.value.forEach(s=>{i[s._id]=!1})}catch(e){console.error("Error fetching users with activities:",e)}}function m(e){C.push({name:"Entry",params:{activityId:e._id}})}function k(e){i[e]=!i[e]}async function b(){try{const e=await fetch("/api/export-excel");if(!e.ok)throw new Error("Fehler beim Herunterladen der Datei");const s=await e.blob(),t=document.createElement("a");t.href=window.URL.createObjectURL(s),t.download="aktivitäten.xlsx",t.click()}catch(e){console.error("Fehler beim Export:",e)}}return y(()=>{f(),p()}),(e,s)=>(a(),n(d,null,[E(U),o("div",F,[s[0]||(s[0]=o("h1",{class:"all-entries_headline"},"Alle Einträge",-1)),o("div",L,[(a(!0),n(d,null,h(l.value,t=>(a(),n("div",{key:t._id,class:"kanban_column"},[o("h2",S,c(t.name),1),(a(!0),n(d,null,h(t.activities,(r,g)=>x((a(),n("div",{key:r._id,class:"kanban_card",onClick:R=>m(r)},[o("h3",D,c(r.activity),1),o("p",N,c(r.createdAt),1)],8,B)),[[A,i[t._id]||g<2]])),128)),t.activities.length>2?(a(),n("button",{key:0,class:"toggle_button",onClick:r=>k(t._id)},c(i[t._id]?"Weniger ansehen":"Alle ansehen"),9,T)):v("",!0)]))),128))]),_.value.role=="Controller"?(a(),n("button",{key:0,class:"button",onClick:b},"Excel Export")):v("",!0)])],64))}},H=j(V,[["__scopeId","data-v-0f183789"]]);export{H as default};
