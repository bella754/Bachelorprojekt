import{r as i,o as I,c as n,a as x,b as d,t as m,F as f,i as g,p as D,g as r,e as V,k as u,n as E,m as c}from"./index-BUUCowTa.js";import{_ as S,S as T}from"./Sidenavigation-Bh2WWG8S.js";const w={class:"form_container"},q={class:"form_headline"},M={class:"form"},O=["for"],j={key:0,class:"form_description"},C=["id","onUpdate:modelValue"],P=["value"],Z=["id","onUpdate:modelValue","placeholder"],$=["id","onUpdate:modelValue"],z=["id","onUpdate:modelValue","placeholder"],L=["id","onUpdate:modelValue"],R=["id","onUpdate:modelValue"],A={__name:"Form",setup(J){const h=D(),U=i(h.query.userID),v=i(h.query.activityTitle),a=i({}),o=i({}),_=i([]),p=i({}),N="https://horus-290d.onrender.com",b=Object.assign({});I(async()=>{for(const s in b){const l=await b[s]();if(l.title===v.value){o.value=l.properties,_.value=l.required||[],Object.keys(o.value).forEach(e=>{a.value[e]=""});break}}});function F(){let s=!0;return p.value={},_.value.forEach(l=>{const e=a.value[l];(!e||e==="")&&(p.value[l]="Dieses Feld darf nicht leer sein.",s=!1),o.value[l].type==="integer"&&!Number.isInteger(Number(e))&&(p.value[l]="Bitte nur ganze Zahlen eingeben.",s=!1),o.value[l].type==="number"&&isNaN(e)&&(p.value[l]="Bitte eine gÃ¼ltige Zahl eingeben.",s=!1)}),s}async function B(){if(!F()){alert("Bitte alle Fehler beheben, bevor du das Formular absendest.");return}try{await fetch(`${N}/api/new-activity/${U.value}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({activityTitle:v.value,...a.value})}),alert("Formular erfolgreich gesendet!")}catch(s){console.error("Error submitting form:",s)}}return(s,l)=>(r(),n(f,null,[x(T),d("div",w,[d("h1",q,m(v.value),1),d("form",M,[(r(!0),n(f,null,g(_.value,e=>(r(),n("div",{key:e},[d("label",{class:"form_label",for:e},m(e),9,O),o.value[e].description?(r(),n("p",j,m(o.value[e].description),1)):V("",!0),o.value[e].enum?u((r(),n("select",{key:1,class:"form_input",id:e,"onUpdate:modelValue":t=>a.value[e]=t},[(r(!0),n(f,null,g(o.value[e].enum,t=>(r(),n("option",{key:t,value:t},m(t),9,P))),128))],8,C)),[[E,a.value[e]]]):o.value[e].type==="textarea"?u((r(),n("textarea",{key:2,class:"form_input form_input_textarea",id:e,"onUpdate:modelValue":t=>a.value[e]=t,placeholder:"Bitte "+e+" angeben"},null,8,Z)),[[c,a.value[e]]]):o.value[e].type==="integer"?u((r(),n("input",{key:3,step:"1",min:"0",placeholder:"Nur ganze Zahlen",class:"form_input",id:e,"onUpdate:modelValue":t=>a.value[e]=t,type:"number",onKeydown:l[0]||(l[0]=(...t)=>s.preventNonInteger&&s.preventNonInteger(...t))},null,40,$)),[[c,a.value[e]]]):o.value[e].type==="string"?u((r(),n("input",{key:4,class:"form_input",id:e,"onUpdate:modelValue":t=>a.value[e]=t,type:"text",placeholder:"Bitte "+e+" angeben"},null,8,z)),[[c,a.value[e]]]):o.value[e].type==="number"?u((r(),n("input",{key:5,class:"form_input",id:e,"onUpdate:modelValue":t=>a.value[e]=t,type:"number"},null,8,L)),[[c,a.value[e]]]):o.value[e].type==="date"?u((r(),n("input",{key:6,class:"form_input",id:e,"onUpdate:modelValue":t=>a.value[e]=t,type:"date"},null,8,R)),[[c,a.value[e]]]):V("",!0)]))),128))]),d("button",{class:"form_submit",onClick:l[1]||(l[1]=e=>B())},"Erstellen")])],64))}},H=S(A,[["__scopeId","data-v-1ea516de"]]);export{H as default};
