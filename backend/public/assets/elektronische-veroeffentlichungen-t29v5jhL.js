import{r as f,c as r,a as x,b as d,t as m,u as i,F as _,i as b,p as F,g as l,e as g,k as u,n as E,m as c}from"./index-DI2jpTHH.js";import{_ as I,S}from"./Sidenavigation-BKWxf_3S.js";import h from"./elektronische-veroeffentlichungen-E5kgDHgz.js";const A={class:"form_container"},T={class:"form_headline"},$={class:"form"},j=["for"],q={key:0,class:"form_description"},C=["id","onUpdate:modelValue"],K=["value"],L=["id","onUpdate:modelValue","placeholder"],O=["id","onUpdate:modelValue"],P=["id","onUpdate:modelValue","placeholder"],R=["id","onUpdate:modelValue"],Z=["id","onUpdate:modelValue"],z={__name:"elektronische-veroeffentlichungen",setup(M){const V=F(),U=f(V.query.userID),t=f({}),n=h.properties,v=h.required||[],w="https://horus-290d.onrender.com",p=f({});Object.keys(n).forEach(a=>{t.value[a]=""});function N(){let a=!0;return p.value={},v.forEach(s=>{const e=t.value[s];(!e||e==="")&&(p.value[s]="Dieses Feld darf nicht leer sein.",a=!1),n[s].type==="integer"&&(Number.isInteger(Number(e))||(p.value[s]="Bitte nur ganze Zahlen eingeben.",a=!1)),n[s].type==="number"&&isNaN(e)&&(p.value[s]="Bitte eine gÃ¼ltige Zahl eingeben.",a=!1)}),a}async function B(){if(!N()){alert("Bitte alle Fehler beheben, bevor du das Formular absendest.");return}try{const s=await(await fetch(`${w}/api/new-activity/elektronische-veroeffentlichungen/${U.value}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.value)})).json();alert("Formular erfolgreich gesendet!")}catch(a){console.error("Error submitting form:",a)}}function D(a){!["Backspace","Tab","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Delete"].includes(a.key)&&!/^\d$/.test(a.key)&&a.preventDefault()}return(a,s)=>(l(),r(_,null,[x(S),d("div",A,[d("h1",T,m(i(h).title),1),d("form",$,[(l(!0),r(_,null,b(i(v),e=>(l(),r("div",{key:e},[d("label",{class:"form_label",for:e},m(e),9,j),i(n)[e].description?(l(),r("p",q,m(i(n)[e].description),1)):g("",!0),i(n)[e].enum?u((l(),r("select",{key:1,class:"form_input",id:e,"onUpdate:modelValue":o=>t.value[e]=o},[(l(!0),r(_,null,b(i(n)[e].enum,o=>(l(),r("option",{key:o,value:o},m(o),9,K))),128))],8,C)),[[E,t.value[e]]]):i(n)[e].type==="textarea"?u((l(),r("textarea",{key:2,class:"form_input form_input_textarea",id:e,"onUpdate:modelValue":o=>t.value[e]=o,placeholder:"Bitte "+e+" angeben"},null,8,L)),[[c,t.value[e]]]):i(n)[e].type==="integer"?u((l(),r("input",{key:3,step:"1",min:"0",placeholder:"Nur ganze Zahlen",class:"form_input",id:e,"onUpdate:modelValue":o=>t.value[e]=o,type:"number",onKeydown:D},null,40,O)),[[c,t.value[e]]]):i(n)[e].type==="string"?u((l(),r("input",{key:4,class:"form_input",id:e,"onUpdate:modelValue":o=>t.value[e]=o,type:"text",placeholder:"Bitte "+e+" angeben"},null,8,P)),[[c,t.value[e]]]):i(n)[e].type==="number"?u((l(),r("input",{key:5,class:"form_input",id:e,"onUpdate:modelValue":o=>t.value[e]=o,type:"number"},null,8,R)),[[c,t.value[e]]]):i(n)[e].type==="date"?u((l(),r("input",{key:6,class:"form_input",id:e,"onUpdate:modelValue":o=>t.value[e]=o,type:"date"},null,8,Z)),[[c,t.value[e]]]):g("",!0)]))),128))]),d("button",{class:"form_submit",onClick:s[0]||(s[0]=e=>B())},"Erstellen")])],64))}},Q=I(z,[["__scopeId","data-v-047b76ac"]]);export{Q as default};
