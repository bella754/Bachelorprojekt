import{r as f,c as n,a as F,b as p,t as m,u,F as v,i as V,p as E,g as l,e as h,k as d,n as I,q as c,m as _}from"./index-CjB0XUlz.js";import{_ as S,S as T}from"./Sidenavigation-DidjxRDf.js";import b from"./aemter-und-gremienaktivitaet-an-der-tu-berlin-BQ9SG9BF.js";const q={class:"form_container"},A={class:"form_headline"},C={class:"form"},$=["for"],j={key:0,class:"form_description"},z=["id","onUpdate:modelValue"],K=["value"],L=["id","onUpdate:modelValue","placeholder"],O=["id","onUpdate:modelValue"],P=["id","onUpdate:modelValue","placeholder"],R=["id","onUpdate:modelValue"],Z=["id","onUpdate:modelValue"],M={key:7,class:"error_message"},G={__name:"aemter-und-gremienaktivitaet-an-der-tu-berlin",setup(J){const U=E(),B=f(U.query.userID),t=f({}),s=b.properties,g=b.required||[],D="https://horus-290d.onrender.com",o=f({});Object.keys(s).forEach(a=>{t.value[a]="",o.value[a]=!1});function N(){let a=!0;return o.value={},g.forEach(i=>{const e=t.value[i];(!e||e==="")&&(o.value[i]="Dieses Feld darf nicht leer sein.",a=!1),s[i].type==="integer"&&(Number.isInteger(Number(e))||(o.value[i]="Bitte nur ganze Zahlen eingeben.",a=!1)),s[i].type==="number"&&isNaN(e)&&(o.value[i]="Bitte eine gÃ¼ltige Zahl eingeben.",a=!1)}),a}async function w(){if(!N()){alert("Bitte alle Fehler beheben, bevor du das Formular absendest.");return}try{const i=await(await fetch(`${D}/api/new-activity/aemter-und-gremienaktivitaet-an-der-tu-berlin/${B.value}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.value)})).json();console.log("Data received from backend:",i),alert("Formular erfolgreich gesendet!")}catch(a){console.error("Error submitting form:",a)}}function x(a){!["Backspace","Tab","Enter","ArrowLeft","ArrowRight","Delete"].includes(a.key)&&!/^\d$/.test(a.key)&&a.preventDefault()}return(a,i)=>(l(),n(v,null,[F(T),p("div",q,[p("h1",A,m(u(b).title),1),p("form",C,[(l(!0),n(v,null,V(u(g),e=>(l(),n("div",{key:e},[p("label",{class:"form_label",for:e},m(e),9,$),u(s)[e].description?(l(),n("p",j,m(u(s)[e].description),1)):h("",!0),u(s)[e].enum?d((l(),n("select",{key:1,class:c(["form_input",{input_error:o.value[e]}]),id:e,"onUpdate:modelValue":r=>t.value[e]=r},[(l(!0),n(v,null,V(u(s)[e].enum,r=>(l(),n("option",{key:r,value:r},m(r),9,K))),128))],10,z)),[[I,t.value[e]]]):u(s)[e].type==="textarea"?d((l(),n("textarea",{key:2,class:c(["form_input form_input_textarea",{input_error:o.value[e]}]),id:e,"onUpdate:modelValue":r=>t.value[e]=r,placeholder:"Bitte "+e+" angeben"},null,10,L)),[[_,t.value[e]]]):u(s)[e].type==="integer"?d((l(),n("input",{key:3,step:"1",min:"0",placeholder:"Nur ganze Zahlen",class:c(["form_input",{input_error:o.value[e]}]),id:e,"onUpdate:modelValue":r=>t.value[e]=r,type:"number",onKeydown:x},null,42,O)),[[_,t.value[e]]]):u(s)[e].type==="string"?d((l(),n("input",{key:4,class:c(["form_input",{input_error:o.value[e]}]),id:e,"onUpdate:modelValue":r=>t.value[e]=r,type:"text",placeholder:"Bitte "+e+" angeben"},null,10,P)),[[_,t.value[e]]]):u(s)[e].type==="number"?d((l(),n("input",{key:5,class:c(["form_input",{input_error:o.value[e]}]),id:e,"onUpdate:modelValue":r=>t.value[e]=r,type:"number"},null,10,R)),[[_,t.value[e]]]):u(s)[e].type==="date"?d((l(),n("input",{key:6,class:c(["form_input",{input_error:o.value[e]}]),id:e,"onUpdate:modelValue":r=>t.value[e]=r,type:"date"},null,10,Z)),[[_,t.value[e]]]):h("",!0),o.value[e]?(l(),n("p",M,m(o.value[e]),1)):h("",!0)]))),128))]),p("button",{class:"form_submit",onClick:i[0]||(i[0]=e=>w())},"Erstellen")])],64))}},X=S(G,[["__scopeId","data-v-de401295"]]);export{X as default};
