import{r as h,j as y,o as E,c as n,a as x,b as a,F as _,i as p,e as v,g as o,t as c,k as A,v as C,l as U}from"./index-0-m_6IU_.js";import{_ as j,S as L}from"./Sidenavigation-C2VktLE-.js";const $={class:"all-entries"},F={class:"kanban_board"},S={class:"user_name"},B=["onClick"],D={class:"activity_title"},N={class:"activity_details"},R=["onClick"],T={__name:"All_Entries",setup(V){const l=h([]),r=y({}),u=h(null),d="https://horus-290d.onrender.com";async function f(){try{const s=await(await fetch(`${d}/current-user`,{method:"GET",headers:{"Content-Type":"application/json"}})).json();s&&s.user&&(u.value=s.user)}catch(e){console.error("Error getting user data:",e)}finally{isLoading.value=!1}}async function m(){try{const e=await fetch(`${d}/api/users-with-activities`);l.value=await e.json(),l.value.forEach(s=>{r[s._id]=!1})}catch(e){console.error("Error fetching users with activities:",e)}}function k(e){U.push({name:"Entry",params:{activityId:e._id}})}function b(e){r[e]=!r[e]}async function g(){try{const e=await fetch(`${d}/api/export-excel`);if(!e.ok)throw new Error("Fehler beim Herunterladen der Datei");const s=await e.blob(),t=document.createElement("a");t.href=window.URL.createObjectURL(s),t.download="aktivitäten.xlsx",t.click()}catch(e){console.error("Fehler beim Export:",e)}}return E(()=>{m(),f()}),(e,s)=>(o(),n(_,null,[x(L),a("div",$,[s[0]||(s[0]=a("h1",{class:"all-entries_headline"},"Alle Einträge",-1)),a("div",F,[(o(!0),n(_,null,p(l.value,t=>(o(),n("div",{key:t._id,class:"kanban_column"},[a("h2",S,c(t.name),1),(o(!0),n(_,null,p(t.activities,(i,w)=>A((o(),n("div",{key:i._id,class:"kanban_card",onClick:W=>k(i)},[a("h3",D,c(i.activity),1),a("p",N,c(i.createdAt),1)],8,B)),[[C,r[t._id]||w<2]])),128)),t.activities.length>2?(o(),n("button",{key:0,class:"toggle_button",onClick:i=>b(t._id)},c(r[t._id]?"Weniger ansehen":"Alle ansehen"),9,R)):v("",!0)]))),128))]),u.value.role=="Controller"?(o(),n("button",{key:0,class:"button",onClick:g},"Excel Export")):v("",!0)])],64))}},H=j(T,[["__scopeId","data-v-6d53af3b"]]);export{H as default};
