import{r as h,j as y,o as E,c as n,a as x,b as r,F as _,i as v,h as A,t as a,e as p,g as o,k as C,v as U,l as j}from"./index-LsO6dzp2.js";import{_ as $,S as F}from"./Sidenavigation-BB9BGPdg.js";const L={class:"all-entries"},N={class:"kanban_board"},S={class:"user_name"},T=["onClick"],V={class:"activity_title"},B={class:"activity_details"},D=["onClick"],R={__name:"All_Entries",setup(W){const d=h([]),i=y({}),c=h(null),u="https://horus-290d.onrender.com";async function f(){try{const s=await(await fetch(`${u}/api/current-user`,{method:"GET",headers:{"Content-Type":"application/json"}})).json();s&&s.user&&(c.value=s.user)}catch(e){console.error("Error getting user data:",e)}}async function m(){try{const e=await fetch(`${u}/api/users-with-activities`);d.value=await e.json(),d.value.forEach(s=>{i[s._id]=!1})}catch(e){console.error("Error fetching users with activities:",e)}}function k(e){j.push({name:"Entry",params:{activityId:e._id}})}function b(e){i[e]=!i[e]}async function w(){try{const e=await fetch(`${u}/api/export-excel`);if(!e.ok)throw new Error("Fehler beim Herunterladen der Datei");const s=await e.blob(),t=document.createElement("a");t.href=window.URL.createObjectURL(s),t.download="aktivitäten.xlsx",t.click()}catch(e){console.error("Fehler beim Export:",e)}}return E(()=>{m(),f()}),(e,s)=>(o(),n(_,null,[x(F),r("div",L,[s[0]||(s[0]=r("h1",{class:"all-entries_headline"},"Alle Einträge",-1)),r("div",N,[(o(!0),n(_,null,v(d.value,t=>(o(),n("div",{key:t._id,class:"kanban_column"},[r("h2",S,a(t.name),1),(o(!0),n(_,null,v(t.activities,(l,g)=>C((o(),n("div",{key:l._id,class:"kanban_card",onClick:I=>k(l)},[r("h3",V,a(l.activity),1),r("p",B,a(l.createdAt),1)],8,T)),[[U,i[t._id]||g<2]])),128)),t.activities.length>2?(o(),n("button",{key:0,class:"toggle_button",onClick:l=>b(t._id)},a(i[t._id]?"Weniger ansehen":"Alle ansehen"),9,D)):p("",!0)]))),128))]),A(" "+a(c.value)+" "+a(c.value.value)+" "+a(c.value.role)+" ",1),c.value.role=="Controller"?(o(),n("button",{key:0,class:"button",onClick:w},"Excel Export")):p("",!0)])],64))}},M=$(R,[["__scopeId","data-v-056d24f7"]]);export{M as default};
